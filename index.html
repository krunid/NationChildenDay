<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>วันเด็กแห่งชาติ - แบบทดสอบ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/vfs_fonts.js"></script>
</head>
<body>
  <h1>แบบทดสอบวันเด็กแห่งชาติ</h1>
  <form id="quiz-form">
    <ol>
      <!-- Question 1 -->
      <li>
        ใครเป็นผู้กำหนดให้วันเด็กแห่งชาติในประเทศไทย?
        <ul>
          <li><input type="radio" name="q1" value="a"> ก. พระบาทสมเด็จพระจุลจอมเกล้าเจ้าอยู่หัว</li>
          <li><input type="radio" name="q1" value="b"> ข. รัฐบาลไทย</li>
          <li><input type="radio" name="q1" value="c"> ค. องค์การสหประชาชาติ</li>
          <li><input type="radio" name="q1" value="d"> ง. กระทรวงศึกษาธิการ</li>
        </ul>
      </li>
      <!-- Add more questions here -->
    </ol>
    <button type="button" onclick="checkAnswers()">ส่งคำตอบ</button>
  </form>

  <div id="result" style="margin-top: 20px;"></div>

  <script>
    const answers = {
      q1: 'b',
      // Add answers for more questions here
    };

    function checkAnswers() {
      const form = document.getElementById('quiz-form');
      const resultDiv = document.getElementById('result');
      const formData = new FormData(form);

      let score = 0;
      let totalQuestions = Object.keys(answers).length;

      resultDiv.innerHTML = '';

      for (const [key, value] of Object.entries(answers)) {
        const userAnswer = formData.get(key);
        if (userAnswer === value) {
          score++;
          resultDiv.innerHTML += `<p>ข้อ ${key.replace('q', '')}: <span style="color: green;">ถูก</span></p>`;
        } else {
          resultDiv.innerHTML += `<p>ข้อ ${key.replace('q', '')}: <span style="color: red;">ผิด</span></p>`;
        }
      }

      const percentage = (score / totalQuestions) * 100;
      resultDiv.innerHTML += `<p>คะแนนรวม: ${score}/${totalQuestions} (${percentage.toFixed(2)}%)</p>`;

      if (percentage >= 70) {
        resultDiv.innerHTML += '<p>ยินดีด้วย! คุณผ่านการทดสอบ</p>';
        generateCertificate(score, totalQuestions);
      } else {
        resultDiv.innerHTML += '<p>ขออภัย คุณไม่ผ่านการทดสอบ</p>';
      }
    }

    function generateCertificate(score, totalQuestions) {
      const docDefinition = {
        content: [
          { text: 'ใบเกียรติบัตร', style: 'header' },
          { text: `ขอมอบให้แก่ผู้ที่ผ่านแบบทดสอบวันเด็กแห่งชาติ`, style: 'subheader' },
          { text: `คะแนนที่ได้: ${score}/${totalQuestions}`, style: 'content' }
        ],
        styles: {
          header: { fontSize: 22, bold: true, alignment: 'center', margin: [0, 20, 0, 10] },
          subheader: { fontSize: 16, alignment: 'center', margin: [0, 10, 0, 20] },
          content: { fontSize: 14, alignment: 'center', margin: [0, 10, 0, 10] }
        }
      };

      pdfMake.createPdf(docDefinition).download('certificate.pdf');
    }
  </script>
</body>
</html>
